<h1 class="mb-4"><i class="bi bi-exclamation-triangle"></i> Low Stock Alert</h1>

<div class="alert alert-warning">
  Products with stock below <%= threshold %> units.
</div>

<% if (lowStock.length === 0) { %>
  <div class="alert alert-success">
    <i class="bi bi-check-circle"></i> All products are well stocked!
  </div>
<% } else { %>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead class="table-warning">
        <tr>
          <th>Product ID</th>
          <th>Product Name</th>
          <th>Current Stock</th>
          <th>Unit Price</th>
          <th>Type</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% lowStock.forEach(item => { %>
          <tr class="low-stock-row">
            <td><%= item.product_id %></td>
            <td><strong><%= item.product_name %></strong></td>
            <td>
              <span class="badge bg-danger"><%= item.quantity_in_stock %></span>
            </td>
            <td>$<%= parseFloat(item.unit_price || 0).toFixed(2) %></td>
            <td><%= item.product_type %></td>
            <td>
              <span class="badge bg-<%= item.status === 'available' ? 'success' : 'secondary' %>">
                <%= item.status %>
              </span>
            </td>
            <td>
              <a href="/admin/inventory" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-pencil"></i> Update Stock
              </a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } %>

<div class="mt-3">
  <a href="/admin/inventory" class="btn btn-secondary">
    <i class="bi bi-arrow-left"></i> Back to Inventory
  </a>
</div>