<h1 class="mb-4"><i class="bi bi-shop"></i> Our Products</h1>

<% if (!showPrices) { %>
  <div class="alert alert-info">
    <i class="bi bi-info-circle"></i> Please <a href="/login">login</a> to see prices and place orders.
  </div>
<% } %>

<div class="row">
  <% if (products.length === 0) { %>
    <div class="col-12">
      <p class="text-muted">No products available at the moment.</p>
    </div>
  <% } else { %>
    <% products.forEach(product => { %>
      <div class="col-md-4 mb-4">
        <div class="card product-card h-100">
          <div class="card-body">
            <h5 class="card-title"><%= product.product_name %></h5>
            <% if (product.description) { %>
              <p class="text-muted mb-2"><%= product.description %></p>
            <% } else { %>
              <p class="text-muted mb-2"><small><%= product.product_type %></small></p>
            <% } %>
            <% if (showPrices) { %>
              <h4 class="text-primary mb-3">$<%= parseFloat(product.unit_price || 0).toFixed(2) %></h4>
            <% } else { %>
              <p class="text-muted mb-3">Login to see price</p>
            <% } %>
            <p class="card-text mb-0">
              <span class="badge bg-<%= product.status === 'available' ? 'success' : 'secondary' %>">
                <%= product.status %>
              </span>
            </p>
          </div>
        </div>
      </div>
    <% }) %>
  <% } %>
</div>